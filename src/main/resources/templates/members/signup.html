<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>íšŒì›ê°€ì… | Study_Us</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Pretendard:wght@400;700&display=swap" rel="stylesheet" />
    <style>
        :root{
            --mint:#e9f5ee; --mint2:#dbe8e5; --ink:#22583c; --sub:#789b86;
            --chip:#f3f7f5; --chip-ink:#315e43; --accent:#ffd96c; --accent2:#ffb55c;
            --grad-a:#41ab77; --grad-b:#1f5e41;
        }
        html,body{height:100%}
        body{
            background:linear-gradient(120deg,var(--mint) 65%,var(--mint2) 100%);
            font-family:'Pretendard','Apple SD Gothic Neo',sans-serif;
            min-height:100vh;margin:0;
        }
        .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center}
        .title{font-family:'Playfair Display',serif;font-size:2.18rem;font-weight:700;color:var(--ink);letter-spacing:-.02em;margin-top:56px;margin-bottom:2px;text-align:center}
        .desc{color:var(--sub);font-size:1.08rem;margin:0 0 2rem 0;text-align:center}

        /* ===== 2ì—´ ë³´ë“œ ===== */
        .board{
            width:100%;max-width:980px;margin:0 auto;
            display:flex;gap:36px;align-items:stretch;justify-content:center;
        }
        .card{
            background:#fff;border-radius:24px;box-shadow:0 8px 24px rgba(80,170,120,.10);
            flex:1 1 0;min-width:0;max-width:460px;
            padding:24px 18px 18px 18px;display:flex;flex-direction:column
        }
        .card.chips{
            background:#f8faf9;border-left:5px solid var(--accent);
            box-shadow:0 4px 18px rgba(80,160,120,.07)
        }
        .card h6{font-weight:800;color:#245e4a;margin:0 0 14px 4px;font-size:1.06rem}

        /* inputs */
        .form-label{font-weight:700;color:#235344;margin-bottom:.35rem}
        .form-control{border-radius:13px;border:1.5px solid #e4efe7;font-size:1.04rem;padding:.74rem 1.1rem}

        /* chip group: ê¹¨ì§ ë°©ì§€ flex-wrap */
        .chip-group{
            display:flex;flex-wrap:wrap;gap:1rem 1.1rem;align-items:flex-start
        }
        .chip-btn{
            background:var(--chip);color:var(--chip-ink);
            border:none;border-radius:999px;box-shadow:0 2px 10px rgba(120,150,120,.06);
            padding:.62rem 1.2rem;font-size:1.06rem;font-weight:600;
            cursor:pointer;transition:.15s;white-space:nowrap;flex:0 0 auto;min-width:88px;max-width:160px
        }
        .chip-btn:active{transform:scale(.97)}
        .chip-btn.selected{
            background:linear-gradient(95deg,var(--grad-a) 0%,var(--grad-b) 110%);
            color:#fff;box-shadow:0 7px 24px rgba(65,171,119,.16);transform:translateY(-2px) scale(1.045)
        }
        .chip-btn.selected::after{
            content:"âœ“";position:relative;margin-left:.45rem;opacity:.95
        }
        .limit{color:#e76459;font-weight:600;margin-top:.35rem;display:none}

        /* í•˜ë‹¨ ë¯¸ë¦¬ë³´ê¸°/ë°°ë„ˆ (í•­ìƒ ê³µê°„ ìœ ì§€) */
        .preview-row{
            width:100%;max-width:980px;margin:18px auto 22px auto;
            display:flex;justify-content:center
        }
        .preview{
            min-height:56px;display:flex;gap:18px;align-items:flex-end;justify-content:center;transition:min-height .18s;width:100%
        }
        .preview.empty{opacity:0;min-height:56px}
        .chip-preview{
            pointer-events:none;background:linear-gradient(95deg,var(--accent) 0%,var(--accent2) 110%);
            color:#925e13;border:none;border-radius:999px;box-shadow:0 7px 24px rgba(255,210,120,.17);
            padding:.58rem 1.4rem;font-weight:800
        }
        .banner{
            background:linear-gradient(89deg,#e3f9fa 40%,#faf3db 95%);border-radius:14px;
            padding:.6em 1.2em;display:inline-flex;gap:.45em;align-items:center;
            font-weight:700;color:#2d6568;font-size:1.03rem
        }

        .submit-btn{
            background:linear-gradient(93deg,var(--grad-a) 0%,var(--grad-b) 110%);
            color:#fff;font-weight:800;border:none;border-radius:13px;font-size:1.15rem;
            padding:.95rem 0;box-shadow:0 8px 18px rgba(65,171,119,.14)
        }

        /* ===== ë°˜ì‘í˜• ===== */
        @media (max-width: 960px){
            .board{max-width:92vw}
            .preview-row{max-width:92vw}
        }
        @media (max-width: 840px){
            .board{flex-direction:column;gap:18px}
            .card{max-width:100%}
            .chip-group{gap:.7rem .9rem}
        }
        @media (max-width: 520px){
            .title{font-size:1.9rem}
            .chip-btn,.chip-preview{font-size:.98rem}
            .banner{font-size:.95rem}
            .preview,.preview.empty{min-height:40px}
        }
    </style>
</head>
<body>
<div class="wrap">
    <div class="title">íšŒì›ê°€ì…</div>
    <div class="desc">ìŠ¤í„°ë”” ì¹´í˜ ì„œë¹„ìŠ¤ë¥¼ ë°”ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”!</div>

    <form id="signupForm" action="/members/signup" method="post" style="width:100%;max-width:980px;padding:0 10px">
        <!-- ê°€ë¡œ 2ì—´ -->
        <div class="board">
            <!-- ì¢Œ: ê¸°ë³¸ì •ë³´ -->
            <section class="card">
                <div class="mb-3">
                    <label class="form-label" for="email">ì´ë©”ì¼</label>
                    <input id="email" name="email" type="email" class="form-control" placeholder="study@example.com" required />
                </div>
                <div class="mb-3">
                    <label class="form-label" for="password">ë¹„ë°€ë²ˆí˜¸</label>
                    <input id="password" name="password" type="password" class="form-control" placeholder="ë¹„ë°€ë²ˆí˜¸(6ì ì´ìƒ)" minlength="6" required />
                </div>
                <div class="mb-3">
                    <label class="form-label" for="address">ì£¼ì†Œ</label>
                    <input id="address" name="address" type="text" class="form-control" placeholder="ê±°ì£¼ì§€(ì‹œ/êµ¬ ë“±)" required />
                </div>
                <div>
                    <label class="form-label" for="userBirth">ìƒë…„ì›”ì¼</label>
                    <input id="userBirth" name="userBirth" type="date" class="form-control" required />
                </div>
            </section>

            <!-- ìš°: ê´€ì‹¬ì‚¬ -->
            <section class="card chips">
                <h6>ê´€ì‹¬ì‚¬(ì¹´í…Œê³ ë¦¬) <span style="color:#e79523">*</span></h6>
                <div id="interestChips" class="chip-group">
                    <!-- DB ëª©ë¡ ë°”ì¸ë”© -->
                    <th:block th:each="cat : ${categories}">
                        <button type="button" class="chip-btn" th:data-id="${cat.id}" th:text="${cat.name}"></button>
                    </th:block>
                </div>
                <input type="hidden" id="selectedCategoryId" name="categoryId" required />
                <div id="limit" class="limit"></div>
            </section>
        </div>

        <!-- [ë¯¸ë¦¬ë³´ê¸° + ë°°ë„ˆ] : ë‘ ì¹´ë“œ ì•„ë˜, ê°€ì…í•˜ê¸° ìœ„ -->
        <div class="preview-row">
            <div id="preview" class="preview empty"></div>
        </div>

        <button type="submit" class="btn submit-btn w-100 mb-2">ê°€ì…í•˜ê¸°</button>
        <div class="text-center mt-2">
            <a href="/members/login" class="link-login">ì´ë¯¸ íšŒì›ì´ì‹ ê°€ìš”? ë¡œê·¸ì¸</a>
        </div>

        <!--provider-->
        <input type="hidden" id="provider" name="provider" value="local">
    </form>
</div>

<div>
    <a href="https://nid.naver.com/internalToken/view/tokenList/pc/ko" target="_blank">
        ğŸ‘ˆ ì •ë³´ì œê³µë™ì˜ í™”ë©´ ë‹¤ì‹œ ë³´ë ¤ë©´ ì—°ê²° í•´ì œí•˜ëŸ¬ ê°€ê¸° (í…ŒìŠ¤íŠ¸í™˜ê²½ìš©)
    </a>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:inline="none">
    // ì¹´í…Œê³ ë¦¬ë³„ ë©”ì‹œì§€
    const categoryMsg = {
        "IT/ê°œë°œ":"IT ìŠ¤í„°ë”” íŒ€ì—ì„œ ë‹¹ì‹ ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”! ğŸ’»",
        "ì™¸êµ­ì–´":"ê¸€ë¡œë²Œ ì¹œêµ¬ë“¤ì´ ëª¨ì´ëŠ” ìŠ¤í„°ë””, ì´ì œ ë‹¹ì‹  ì°¨ë¡€! ğŸŒ",
        "ìê²©ì¦":"ìê²©ì¦ í•©ê²©ì„ í–¥í•´ í•¨ê»˜ ë‹¬ë ¤ë´ìš”! ğŸ…",
        "ë¬¸í•™/ì±…":"ë…ì„œëª¨ì„ì— ì–´ìš¸ë¦¬ëŠ” ê°ì„±íŒŒ ë©¤ë²„! ğŸ“š",
        "ìŒì•…/ì˜ˆìˆ ":"ìŒì•…Â·ì˜ˆìˆ  ë™ì•„ë¦¬ì—ì„œ í™˜ì˜í•´ìš”! ğŸ¨",
        "ê²½ì˜/ê²½ì œ":"ê²½ì˜Â·ê²½ì œ íŠ¸ë Œë“œë¥¼ í•¨ê»˜ ë¶„ì„í•´ìš”! ğŸ“Š",
        "ìˆ˜í•™/ê³¼í•™":"í˜¸ê¸°ì‹¬ ë§ì€ ì´ê³¼ ë©¤ë²„ë“¤ í™˜ì˜! ğŸ”¬",
        "ì·¨ì—…/ë©´ì ‘":"ì·¨ì—…Â·ë©´ì ‘ ê¿€íŒ ë‚˜ëˆŒ ë©¤ë²„ë¥¼ ì°¾ê³  ìˆì–´ìš”! ğŸ¤",
        "ìê¸°ê³„ë°œ":"ì„±ì¥í•˜ëŠ” ìš°ë¦¬ ëª¨ë‘ ì‘ì›í•©ë‹ˆë‹¤! ğŸš€",
        "ì·¨ë¯¸/ì—¬ê°€":"ì—¬ê°€Â·ì·¨ë¯¸ ìŠ¤í„°ë””ì—ì„œ ì¦ê²ê²Œ ë§Œë‚˜ìš”! ğŸ¾",
        "ì‹œì‚¬/íŠ¸ë Œë“œ":"íŠ¸ë Œë“œ ì„¸í„°ë“¤ê³¼ í†µì°°ì„ ë‚˜ëˆ ë³´ì„¸ìš”! ğŸ“°",
        "ìš´ë™/ê±´ê°•":"í•¨ê»˜ ê±´ê°•í•˜ê²Œ, í•¨ê»˜ ì„±ì¥í•´ìš”! ğŸƒâ€â™‚ï¸"
    };

    document.addEventListener('DOMContentLoaded', () => {
        const chips = [...document.querySelectorAll('#interestChips .chip-btn')];
        const hidden = document.getElementById('selectedCategoryId');
        const preview = document.getElementById('preview');
        const limit = document.getElementById('limit');
        const form = document.getElementById('signupForm');

        const clearPreview = () => { preview.classList.add('empty'); preview.innerHTML=''; };
        const setPreview = (text) => {
            const msg = categoryMsg[text] || 'ê´€ì‹¬ ë¶„ì•¼ì˜ ë©¤ë²„ë“¤ì´ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”!';
            preview.innerHTML = `<span class="chip-preview">${text}</span>
                           <span class="banner">âœ¨ ${msg}</span>`;
            preview.classList.remove('empty');
        };

        chips.forEach(btn=>{
            btn.addEventListener('click', ()=>{
                chips.forEach(b=>b.classList.remove('selected'));
                btn.classList.add('selected');
                hidden.value = btn.dataset.id;
                limit.style.display='none';
                setPreview(btn.textContent.trim());
            });
        });

        form.addEventListener('submit', (e)=>{
            if(!hidden.value){
                limit.textContent='ê´€ì‹¬ì‚¬ë¥¼ 1ê°œ ì„ íƒí•´ ì£¼ì„¸ìš”!';
                limit.style.display='block';
                clearPreview();
                e.preventDefault();
            }
        });

        // ìƒˆë¡œê³ ì¹¨ ë³µì› ì²˜ë¦¬
        if(hidden.value){
            const found = chips.find(b=>b.dataset.id===hidden.value);
            if(found){ found.classList.add('selected'); setPreview(found.textContent.trim()); }
        }else{
            clearPreview();
        }
    });
</script>



<script th:inline="javascript">
    /*ì˜¤ì–´ìŠ¤ë¡œ ì˜¨ ì‚¬ëŒì€ íšŒì›ê°€ì…ì‹œ ì´ë©”ì¼ ì ìš©, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì¹¸ ìˆ¨ê¸°ê¸°*/
    const email = /*[[${email}]]*/ null;
    const prov = /*[[${prov}]]*/ null;
    document.addEventListener("DOMContentLoaded", function () {
        const emailInput = document.getElementById('email');
        const pwdInput = document.getElementById('password');
        const provInput = document.getElementById('provider');
        if(email !== null && email !== "null"){
            emailInput.value = email;
            emailInput.readOnly = true;
            pwdInput.closest('.mb-3').style.display = 'none';
            pwdInput.value = "oauth2-verified";
        }
        if(prov !== null && prov !== "null"){
            provInput.value = prov;
        }
        console.log(email)
        console.log(prov)
    })
</script>

</body>
</html>
