
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë‚´ì •ë³´ ë³€ê²½ | StudyMate</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/create.css">
</head>
<body>
<!-- Animated Background -->
<div class="bg-animation">
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>
</div>

<!-- Header -->
<header class="header">
    <div class="header-content">
        <a href="/" class="logo">
            <img src="/images/StudyUsLogo.png" alt="StudyUs" class="logo-img">
        </a>

        <div class="search-bar">
            <svg class="search-icon" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
            </svg>
            <input type="text" class="search-input" placeholder="ê´€ì‹¬ìˆëŠ” ìŠ¤í„°ë””ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”...">
        </div>

        <nav class="nav-links">
            <div th:if="${isLoggedIn}" class="user-info">
                <div class="user-dropdown">
                    <span class="welcome-message" onclick="toggleDropdown()">
                        <span th:text="${userName != null ? userName : email}">ì‚¬ìš©ìëª…</span>ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!
                        <svg class="dropdown-arrow" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"></path>
                        </svg>
                    </span>
                    <div class="dropdown-menu" id="userDropdown">
                        <a href="/members/profile" class="dropdown-item">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd"></path>
                            </svg>
                            ë‚´ ì •ë³´ ë³€ê²½
                        </a>
                        <a href="/study/manage" class="dropdown-item">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                            </svg>
                            ë‚´ ìŠ¤í„°ë”” ê´€ë¦¬
                        </a>
                        <hr class="dropdown-divider">
                        <a href="/members/logout" class="dropdown-item logout">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"></path>
                            </svg>
                            ë¡œê·¸ì•„ì›ƒ
                        </a>
                    </div>
                </div>
            </div>
            <div th:unless="${isLoggedIn}" class="auth-links">
                <a href="/members/login" class="nav-btn login-btn">ë¡œê·¸ì¸</a>
                <a href="/members/signup" class="nav-btn signup-btn">íšŒì›ê°€ì…</a>
            </div>
        </nav>
    </div>
</header>

<!-- Main Content -->
<div class="main-container">
    <!-- Sidebar -->
    <aside class="sidebar">
        <h3 class="sidebar-title">
            <div style="display: flex; align-items: center; gap: 0.5rem;">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd"></path>
                </svg>
                ë‚´ ì •ë³´
            </div>
            <button class="sidebar-toggle" onclick="toggleSidebar()">
                <svg class="toggle-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
            </button>
        </h3>

        <ul class="category-list">
            <li class="category-item">
                <a href="/members/profile" class="category-link active">
                    <span class="category-icon">ğŸ‘¤</span>
                    ê¸°ë³¸ ì •ë³´
                </a>
            </li>
            <li class="category-item">
                <a href="/study/manage" class="category-link">
                    <span class="category-icon">ğŸ“š</span>
                    ìŠ¤í„°ë”” ê´€ë¦¬
                </a>
            </li>
        </ul>
    </aside>

    <!-- Profile Content -->
    <main class="create-container fade-in">
        <h2 class="create-title">ë‚´ì •ë³´ ë³€ê²½</h2>
        <p class="create-subtitle">ê°œì¸ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”</p>

        <div class="profile-container">
            <!-- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ -->
            <div class="section-divider">
                <div class="section-title">ê¸°ë³¸ ì •ë³´</div>
            </div>

            <form id="profile-form">
                <div class="form-row-2">
                    <div class="form-group">
                        <label class="form-label">ì´ë©”ì¼</label>
                        <div class="info-display readonly" th:text="${member.email}">ì´ë©”ì¼</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì´ë¦„/ë‹‰ë„¤ì„</label>
                        <input type="text" class="form-input" id="name-input" th:value="${member.name}" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                </div>

                <div class="form-row-2">
                    <div class="form-group">
                        <label class="form-label">ì „í™”ë²ˆí˜¸</label>
                        <div class="info-display readonly" th:text="${member.phone}">ì „í™”ë²ˆí˜¸</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì£¼ì†Œ</label>
                        <input type="text" class="form-input" id="address-input" th:value="${member.address}" placeholder="ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                </div>
            </form>

            <!-- ë³´ì•ˆ ì„¤ì • ì„¹ì…˜ -->
            <div class="section-divider">
                <div class="section-title">ë³´ì•ˆ ì„¤ì •</div>
            </div>

            <div class="form-group">
                <label class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                <div class="password-section">
                    <div class="info-display password">â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</div>
                    <button type="button" class="change-password-btn" onclick="togglePasswordChange()">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
                </div>
                
                <div class="password-change-form hidden" id="password-change-form">
                    <div class="form-row-1">
                        <input type="password" class="form-input" id="current-password" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸">
                    </div>
                    <div class="form-row-1">
                        <input type="password" class="form-input" id="new-password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸">
                    </div>
                    <div class="form-row-1">
                        <input type="password" class="form-input" id="confirm-password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸">
                    </div>
                    <div class="form-row-2">
                        <button type="button" class="submit-btn" onclick="changePassword()">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
                        <button type="button" class="cancel-btn" onclick="cancelPasswordChange()">ì·¨ì†Œ</button>
                    </div>
                </div>
            </div>

            <!-- ê´€ì‹¬ ì¹´í…Œê³ ë¦¬ ì„¹ì…˜ -->
            <div class="section-divider">
                <div class="section-title">ê´€ì‹¬ ì¹´í…Œê³ ë¦¬</div>
            </div>

            <div class="form-group">
                <label class="form-label">ì„ íƒí•œ ê´€ì‹¬ì‚¬</label>
                <div class="category-badges">
                    <span th:each="category : ${member.categories}" class="category-badge" th:text="${category.name}">ì¹´í…Œê³ ë¦¬</span>
                    <span th:if="${#lists.isEmpty(member.categories)}" class="no-category">ì„ íƒëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</span>
                </div>
            </div>

            <!-- ìˆ˜ì • ë²„íŠ¼ -->
            <div class="update-button-container">
                <button type="button" class="update-profile-btn" onclick="updateProfile()">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"></path>
                    </svg>
                    ì •ë³´ ì €ì¥
                </button>
            </div>
        </div>
    </main>
</div>

<!-- Sidebar Toggle Button (for collapsed state) -->
<button class="sidebar-toggle-btn" onclick="toggleSidebar()">
    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
    </svg>
</button>

<style>
.profile-container {
    max-width: 800px;
    margin: 0 auto;
}

.info-display {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 12px 16px;
    color: #333333;
    font-size: 14px;
    line-height: 1.5;
    min-height: 24px;
    display: flex;
    align-items: center;
    position: relative;
}

.info-display.readonly {
    background: rgba(200, 200, 200, 0.3);
    color: #666666;
}

.info-display.editable {
    cursor: pointer;
    transition: all 0.3s ease;
}

.info-display.editable:hover {
    background: rgba(59, 130, 246, 0.1);
    border-color: rgba(59, 130, 246, 0.3);
}

.edit-btn {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    color: white;
    border: none;
    padding: 4px 12px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.edit-btn:hover {
    transform: translateY(-50%) scale(1.05);
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}

.form-input {
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid rgba(59, 130, 246, 0.2);
    border-radius: 12px;
    padding: 12px 16px;
    color: #333333;
    font-size: 14px;
    width: 100%;
    transition: all 0.3s ease;
}

.form-input:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.hidden {
    display: none !important;
}

.password-section {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.password-section .info-display {
    flex: 1;
}

.change-password-btn {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.change-password-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
}

.password-change-form {
    margin-top: 1rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 12px;
    border: 1px solid rgba(59, 130, 246, 0.2);
}

.category-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.category-badge {
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
}

.no-category {
    color: #666666;
    font-style: italic;
    padding: 0.5rem 0;
}

.section-divider {
    margin: 2rem 0 1.5rem 0;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 0.5rem;
}

.section-title {
    color: #ffffff;
    font-size: 18px;
    font-weight: 600;
}

/* ìˆ˜ì • ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
.update-button-container {
    display: flex;
    justify-content: center;
    margin-top: 3rem;
    margin-bottom: 2rem;
    padding-top: 2rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.update-profile-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    color: white;
    border: none;
    padding: 1rem 2.5rem;
    border-radius: 50px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.update-profile-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
    background: linear-gradient(135deg, #2563eb, #7c3aed);
}

.update-profile-btn:active {
    transform: translateY(0);
}

.update-profile-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
}

/* ë¡œë”© ìŠ¤í”¼ë„ˆ ì• ë‹ˆë©”ì´ì…˜ */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.animate-spin {
    animation: spin 1s linear infinite;
}

@media (max-width: 768px) {
    .form-row-2 {
        flex-direction: column;
    }
    
    .password-section {
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
    }
    
    .update-profile-btn {
        width: 100%;
        justify-content: center;
    }
}
</style>

<script>
function toggleDropdown() {
    const dropdown = document.getElementById('userDropdown');
    const welcomeMessage = document.querySelector('.welcome-message');
    
    dropdown.classList.toggle('show');
    welcomeMessage.classList.toggle('active');
}

function toggleSidebar() {
    const sidebar = document.querySelector('.sidebar');
    const mainContainer = document.querySelector('.main-container');

    sidebar.classList.toggle('collapsed');
    mainContainer.classList.toggle('sidebar-collapsed');
}

// í”„ë¡œí•„ ìˆ˜ì • í•¨ìˆ˜
function updateProfile() {
    // ìˆ˜ì •ëœ ë°ì´í„° ìˆ˜ì§‘
    const updatedData = {
        name: document.getElementById('name-input').value.trim(),
        address: document.getElementById('address-input').value.trim()
    };
    
    // ë¹ˆ ê°’ ì²´í¬
    if (!updatedData.name) {
        alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        document.getElementById('name-input').focus();
        return;
    }
    
    // ë²„íŠ¼ ìƒíƒœ ë³€ê²½
    const updateBtn = document.querySelector('.update-profile-btn');
    const originalText = updateBtn.innerHTML;
    updateBtn.disabled = true;
    updateBtn.innerHTML = `
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20" class="animate-spin">
            <path d="M4 2a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H4zm6 9V8a1 1 0 10-2 0v3a1 1 0 001 1h3a1 1 0 100-2h-2z"/>
        </svg>
        ìˆ˜ì • ì¤‘...
    `;
    
    // ì„œë²„ì— ì—…ë°ì´íŠ¸ ìš”ì²­
    fetch('/members/profile/update', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(updatedData)
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            alert('ìˆ˜ì • ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
            // ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            window.location.href = '/';
        } else {
            throw new Error(data.message || 'ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
    })
    .finally(() => {
        // ë²„íŠ¼ ìƒíƒœ ë³µì›
        updateBtn.disabled = false;
        updateBtn.innerHTML = originalText;
    });
}

// ì´ˆê¸° ê°’ì„ ì €ì¥í•˜ì—¬ ë³€ê²½ ì‚¬í•­ ê°ì§€ì— ì‚¬ìš©
let originalValues = {
    name: document.getElementById('name-input')?.value || '',
    address: document.getElementById('address-input')?.value || ''
};

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°ê°’ ì„¤ì •
document.addEventListener('DOMContentLoaded', function() {
    const nameInput = document.getElementById('name-input');
    const addressInput = document.getElementById('address-input');
    
    if (nameInput) originalValues.name = nameInput.value;
    if (addressInput) originalValues.address = addressInput.value;
});

function togglePasswordChange() {
    const form = document.getElementById('password-change-form');
    form.classList.toggle('hidden');
}

function cancelPasswordChange() {
    const form = document.getElementById('password-change-form');
    form.classList.add('hidden');
    
    // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
    document.getElementById('current-password').value = '';
    document.getElementById('new-password').value = '';
    document.getElementById('confirm-password').value = '';
}

function changePassword() {
    const currentPassword = document.getElementById('current-password').value;
    const newPassword = document.getElementById('new-password').value;
    const confirmPassword = document.getElementById('confirm-password').value;
    
    // ìœ íš¨ì„± ê²€ì‚¬
    if (!currentPassword || !newPassword || !confirmPassword) {
        alert('ëª¨ë“  ë¹„ë°€ë²ˆí˜¸ í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }
    
    if (newPassword !== confirmPassword) {
        alert('ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        return;
    }
    
    if (newPassword.length < 8) {
        alert('ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” 8ìë¦¬ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
        return;
    }
    
    // ë²„íŠ¼ ìƒíƒœ ë³€ê²½
    const changeBtn = document.querySelector('.password-change-form .submit-btn');
    const originalText = changeBtn.textContent;
    changeBtn.disabled = true;
    changeBtn.textContent = 'ë³€ê²½ ì¤‘...';
    
    // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ë°ì´í„°
    const passwordData = {
        currentPassword: currentPassword,
        newPassword: newPassword
    };
    
    // ì„œë²„ì— ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ìš”ì²­
    fetch('/members/profile/change-password', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(passwordData)
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            alert('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
            
            // í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ ë¶€ë¶„ ì—…ë°ì´íŠ¸ (ìƒˆ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ë§Œí¼ ì ìœ¼ë¡œ í‘œì‹œ)
            const newPasswordLength = newPassword.length;
            const passwordDisplay = document.querySelector('.password-section .info-display.password');
            if (passwordDisplay) {
                passwordDisplay.textContent = 'â€¢'.repeat(newPasswordLength);
            }
            
            cancelPasswordChange(); // í¼ ë‹«ê¸° ë° ì´ˆê¸°í™”
        } else {
            throw new Error(data.message || 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
    })
    .finally(() => {
        // ë²„íŠ¼ ìƒíƒœ ë³µì›
        changeBtn.disabled = false;
        changeBtn.textContent = originalText;
    });
}

// ì™¸ë¶€ í´ë¦­ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
document.addEventListener('click', function(event) {
    const dropdown = document.getElementById('userDropdown');
    const userInfo = document.querySelector('.user-info');
    
    if (dropdown && userInfo && !userInfo.contains(event.target)) {
        dropdown.classList.remove('show');
        document.querySelector('.welcome-message').classList.remove('active');
    }
});
</script>

</body>
</html>